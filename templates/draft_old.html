<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
          crossorigin="anonymous">
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Title -->
    <link rel="shortcut icon" href="/static/img/favicon.png" type="image/x-icon">

    <!-- Flaticon -->
    <link rel="stylesheet" href="/static/css/flaticon.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/static/css/fontawesome-5.14.0.min.css">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <!-- Nice Select -->
    <link rel="stylesheet" href="/static/css/nice-select.min.css">
    <!-- Animate -->
    <link rel="stylesheet" href="/static/css/animate.min.css">
    <!-- Slick -->
    <link rel="stylesheet" href="/static/css/slick.min.css">
    <!-- Main Style -->
    <link rel="stylesheet" href="/static/css/style.css">

    <!-- Jquery -->
    <script src="/static/js/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap -->
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- Appear Js -->
    <script src="/static/js/appear.min.js"></script>
    <!-- Slick -->
    <script src="/static/js/slick.min.js"></script>
    <!-- Nice Select -->
    <script src="/static/js/jquery.nice-select.min.js"></script>
    <!-- Image Loader -->
    <script src="/static/js/imgloaded.pkgd.min.js"></script>
    <!-- Isotope -->
    <script src="/static/js/isotope.pkgd.min.js"></script>
    <!--  WOW Animation -->
    <script src="/static/js/wow.min.js"></script>
    <!-- Custom script -->
    <script src="/static/js/script.js"></script>
    <title>URAVNNETIK</title>
    <style>
        .unique-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100vw;
            max-width: 1000px;
            flex: 1;
            margin-top: 20px; /* Добавлено расстояние сверху */
        }
        .unique-canvas {
            border: 1px solid #474b4e;
            border-radius: 10px;
            touch-action: none;
            width: 90vw;
            height: 90vh;
            max-width: 1000px;
            max-height: 600px;
            background-color: #1A1A1A;
        }
        .unique-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        .unique-button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4caf50;
            border: none;
            border-radius: 5px;
            color: #ffffff;
            transition: background-color 0.3s;
        }
        .unique-button:hover {
            background-color: #45a049;
        }
        .unique-active {
            background-color: #ffa500;
        }
        .unique-brush-size {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .unique-brush-size input[type="range"] {
            width: 200px;
        }
        .unique-brush-size input[type="number"] {
            width: 50px;
            text-align: center;
            margin-left: 10px;
        }
    </style>
</head>
<body class="home-one">
<div class="page-wrapper">

    <!-- Preloader -->
    <div class="preloader"></div>

    <!-- main header -->
    <header class="main-header menu-absolute">
        <!--Header-Upper-->
        <div class="header-upper">
            <div class="container container-1620 clearfix">

                <div class="header-inner rel d-flex align-items-center">
                    <div class="logo-outer">
                        <div class="logo"><a href="/"><img src="/static/img/logos/logo.png" alt="Logo"
                                                           title="Logo"></a></div>
                    </div>

                    <div class="nav-outer clearfix mx-auto">
                        <!-- Main Menu -->
                        <nav class="main-menu navbar-expand-lg">
                            <div class="navbar-header">
                                <div class="mobile-logo my-15">
                                    {% if current_user.is_authenticated %}
                                    <a href="/story">
                                        <img src="/static/img/logos/logo.png" alt="Logo" title="Logo">
                                    </a>
                                    {% else %}
                                    <a href="/">
                                        <img src="/static/img/logos/logo.png" alt="Logo" title="Logo">
                                    </a>
                                    {% endif %}
                                </div>
                                <div class="menu-btns">
                                    <div class="menu-sidebar">
                                        <button type="button" data-bs-toggle="collapse"
                                                data-bs-target=".navbar-collapse">
                                            <img src="/static/img/shape/sidebar-tottler.svg" alt="Toggler">
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="navbar-collapse collapse clearfix">
                                <ul class="navigation clearfix">
                                    {% if current_user.is_authenticated %}
                                    <li><a href="/profile">Имя: {{ current_user.username }}</a></li>
                                    <li><a href="/logout">Выйти</a></li>
                                    {% else %}
                                    <li><a href="/login">Войти</a></li>
                                    <li><a href="/register">Зарегистрироваться</a></li>
                                    {% endif %}
                                </ul>
                            </div>
                        </nav>
                        <!-- Main Menu End-->
                    </div>
                </div>

            </div>

        </div>

        <!--End Header Upper-->

        <!-- Page Banner Start -->
        <section class="page-banner-area pt-100 rpt-60 pb-100 rpb-60 rel z-1 text-center">
            <div class="container">
                <img src="/static/img/logos/name_project.png">
            </div><br>
            <main role="main" class="container">
                <style>
                    canvas {
                        border: 1px solid #474b4e;
                        border-radius: 10px;
                        touch-action: none;
                        width: 90vw;
                        height: 40vh;
                        max-width: 1000px;
                        max-height: 600px;
                        background-color: #1A1A1A;
                    }

                </style>
                <div class="container">
                    <h2>{{eq}}</h2>
                    <br>
                    <canvas id="drawingCanvas"></canvas>
                    <input type="range" id="brushSizeRange" value="2" min="1" max="50">
                    <button id="drawButton" class="theme-btn" style="width: 30%; background-color: gray"><i class="fas fa-pen" style="color: #C9F31D;"></i></button>
                    <button id="eraseButton" class="theme-btn" style="width: 30%; background-color: gray"><i class="fas fa-eraser"  style="color: #C9F31D;"></i></button>
                    <button id="clearButton" class="theme-btn" style="width: 30%; background-color: gray"><i class="fas fa-broom"  style="color: #C9F31D;"></i></button>
                </div>
                <br>
                <div align="left" style="margin-left: 5vw">
                    <a href="/solv/{{ids}}" type="submit" class="theme-btn"> Назад    <i class="far fa-angle-left"></i></a>
                </div>
                <script>
                    const canvas = document.getElementById('drawingCanvas');
                    const context = canvas.getContext('2d');
                    const drawButton = document.getElementById('drawButton');
                    const eraseButton = document.getElementById('eraseButton');
                    const clearButton = document.getElementById('clearButton');
                    const brushSizeRange = document.getElementById('brushSizeRange');
                    const brushSizeNumber = 10;

                    let drawing = false;
                    let erasing = false;

                    // Установим размеры canvas
                    function resizeCanvas() {
                        canvas.width = canvas.clientWidth;
                        canvas.height = canvas.clientHeight;
                        context.lineWidth = brushSizeRange.value;
                        context.lineCap = 'round';
                    }

                    window.addEventListener('resize', resizeCanvas);
                    resizeCanvas();

                    canvas.addEventListener('mousedown', startDrawing, false);
                    canvas.addEventListener('mousemove', draw, false);
                    canvas.addEventListener('mouseup', stopDrawing, false);
                    canvas.addEventListener('mouseout', stopDrawing, false);

                    canvas.addEventListener('touchstart', startDrawing, false);
                    canvas.addEventListener('touchmove', draw, false);
                    canvas.addEventListener('touchend', stopDrawing, false);
                    canvas.addEventListener('touchcancel', stopDrawing, false);

                    drawButton.addEventListener('click', () => {
                        erasing = false;
                        drawButton.classList.add('active');
                        eraseButton.classList.remove('active');
                    });

                    eraseButton.addEventListener('click', () => {
                        erasing = true;
                        drawButton.classList.remove('active');
                        eraseButton.classList.add('active');
                    });

                    brushSizeRange.addEventListener('input', () => {
                        brushSizeNumber.value = brushSizeRange.value;
                        context.lineWidth = brushSizeRange.value;
                    });

                    function getMousePosition(event) {
                        return {
                            x: event.clientX - canvas.offsetLeft,
                            y: event.clientY - canvas.offsetTop
                        };
                    }

                    function getTouchPosition(event) {
                        const touch = event.touches[0];
                        return {
                            x: touch.clientX - canvas.offsetLeft,
                            y: touch.clientY - canvas.offsetTop
                        };
                    }

                    function startDrawing(event) {
                        event.preventDefault();
                        drawing = true;
                        context.beginPath();
                        const position = event.touches ? getTouchPosition(event) : getMousePosition(event);
                        context.moveTo(position.x, position.y);
                    }

                    function draw(event) {
                        event.preventDefault();
                        if (!drawing) return;
                        const position = event.touches ? getTouchPosition(event) : getMousePosition(event);
                        context.lineTo(position.x, position.y);
                        context.strokeStyle = erasing ? '#1A1A1A' : '#ffffff';
                        context.stroke();
                    }

                    function stopDrawing(event) {
                        event.preventDefault();
                        drawing = false;
                        context.closePath();
                    }

                    // Очистка экрана
                    clearButton.addEventListener('click', () => {
                        context.clearRect(0, 0, canvas.width, canvas.height);
                    });
                </script>
            </main>
        </section>

        <!-- Page Banner End -->
</div>
<!-- Begin page content -->

</body>
</html>
